<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controle de Projetos Rech Inform√°tica</title>
    <!-- Link para o arquivo CSS externo -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Tela de Login -->
    <div id="loginScreen" class="login-container">
        <div class="login-box">
            <div class="login-header">
                <div class="logo">‚öôÔ∏è</div>
                <h1 class="app-title">DeployManager Pro</h1>
                <p class="app-subtitle">Controle de Projetos Implanta√ß√£o</p>
            </div>
            <div>
                <div class="form-group">
                    <label class="form-label">Usu√°rio</label>
                    <input type="text" id="username" class="form-input" placeholder="Digite seu usu√°rio" autocomplete="username">
                </div>
                <div class="form-group">
                    <label class="form-label">Senha</label>
                    <input type="password" id="password" class="form-input" placeholder="Digite sua senha" autocomplete="current-password">
                </div>
                <button onclick="doLogin()" class="btn btn-primary" style="width: 100%;">
                    üîë Entrar
                </button>
            </div>
            <div class="test-users">
                <h4>Usu√°rios de teste:</h4>
                <div class="user-item">
                    <span><strong>admin</strong> / senha123</span>
                    <button class="quick-login quick-login-btn" data-username="admin" data-password="senha123">Login</button>
                </div>
                <div class="user-item">
                    <span><strong>implantador</strong> / impl123</span>
                    <button class="quick-login quick-login-btn" data-username="implantador" data-password="impl123">Login</button>
                </div>
                <div class="user-item">
                    <span><strong>cliente</strong> / cli123</span>
                    <button class="quick-login quick-login-btn" data-username="cliente" data-password="cli123">Login</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Aplica√ß√£o Principal -->
    <div id="mainApp" class="hidden">
        <!-- Cabe√ßalho -->
        <header class="header">
            <div class="container">
                <div class="header-content">
                    <div class="header-left">
                        <span class="logo-header">‚öôÔ∏è</span>
                        <h1 class="app-name">RECH INFORM√ÅTICA</h1>
                    </div>
                    <div class="header-right">
                        <button onclick="openFlowManagerModal()" class="btn btn-secondary hidden" id="manageFlowsBtn" aria-label="Gerenciar Fluxos">
                            ‚öôÔ∏è Gerenciar Fluxos
                        </button>
                        <button onclick="openOfficialChecklistManagerModal()" class="btn btn-secondary hidden" id="manageOfficialChecklistsBtn" aria-label="Gerenciar Checklists Oficiais">
                            ‚úÖ Gerenciar Checklists Oficiais
                        </button>
                        <button onclick="openTechnicianManagerModal()" class="btn btn-secondary hidden" id="manageTechniciansBtn" aria-label="Cadastrar T√©cnicos">
                            üë• Cadastrar T√©cnicos
                        </button>
                        <button onclick="openUserManagerModal()" class="btn btn-secondary hidden" id="manageUsersBtn" aria-label="Gerenciar Usu√°rios">
                            üîë Gerenciar Usu√°rios
                        </button>
                        <button onclick="openNewProjectModal()" class="btn btn-primary hidden" id="newProjectBtn" aria-label="Novo Projeto">
                            ‚ûï Novo Projeto
                        </button>
                        <button onclick="openNotesModal()" class="btn btn-secondary hidden" id="myNotesBtn" style="margin-left: 0.5rem;" aria-label="Minhas Anota√ß√µes">
                            üìù Minhas Anota√ß√µes
                        </button>
                        <button onclick="openGeneralSearchModal()" class="btn btn-secondary hidden" id="generalSearchBtn" style="margin-left: 0.5rem;" aria-label="Buscar Geral">
                            üîç Buscar Geral
                        </button>
                        <div class="user-info">
                            <span>üë§</span>
                            <span id="currentUser">Usu√°rio</span>
                            <button onclick="doLogout()" class="btn btn-danger" style="margin-left: 0.5rem; padding: 0.5rem;" aria-label="Sair">
                                üö™ Sair
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        <div class="container dashboard">
            <!-- Cart√µes do Dashboard -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-content">
                        <div>
                            <div class="stat-label">Projetos Ativos</div>
                            <div class="stat-value" id="activeProjects">0</div>
                        </div>
                        <div class="stat-icon">üìã</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-content">
                        <div>
                            <div class="stat-label">Em Execu√ß√£o</div>
                            <div class="stat-value" id="runningProjects">0</div>
                        </div>
                        <div class="stat-icon">‚ñ∂Ô∏è</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-content">
                        <div>
                            <div class="stat-label">Conclu√≠dos</div>
                            <div class="stat-value" id="completedProjects">0</div>
                        </div>
                        <div class="stat-icon">‚úÖ</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-content">
                        <div>
                            <div class="stat-label">Taxa Sucesso</div>
                            <div class="stat-value" id="successRate">0%</div>
                        </div>
                        <div class="stat-icon">üìà</div>
                    </div>
                </div>
            </div>
            <!-- Abas -->
            <div class="tabs">
                <div class="tab-nav">
                    <button class="tab-btn active" onclick="switchTab('projects')" aria-controls="projects-tab">
                        üìÅ Projetos
                    </button>
                    <button class="tab-btn" onclick="switchTab('gantt')" aria-controls="gantt-tab">
                        üìä Cronograma
                    </button>
                    <button class="tab-btn" onclick="switchTab('reports')" aria-controls="reports-tab">
                        üìà Relat√≥rios
                    </button>
                    <button class="tab-btn" onclick="switchTab('client')" aria-controls="client-tab">
                        üëÅÔ∏è Vis√£o Cliente
                    </button>
                </div>
                <!-- Aba de Projetos -->
                <div id="projects-tab" class="tab-content" role="tabpanel" aria-labelledby="projects-tab-btn">
                    <div class="tab-header">
                        <h2 class="tab-title">Projetos de Implanta√ß√£o</h2>
                        <div class="tab-controls">
                            <select id="statusFilter" class="form-select" onchange="loadProjects()">
                                <option value="">Todos os Status</option>
                                <option value="Planejamento">Em Planejamento</option>
                                <option value="Em Execu√ß√£o">Em Execu√ß√£o</option>
                                <option value="Conclu√≠do">Conclu√≠do</option>
                            </select>
                            <input type="text" id="searchInput" placeholder="Buscar projeto..." class="form-input" style="width: 200px;" oninput="loadProjects()">
                        </div>
                    </div>
                    <div id="projectsList">
                        <!-- Projetos ser√£o preenchidos aqui -->
                    </div>
                </div>
                <!-- Aba de Cronograma (Gantt) -->
                <div id="gantt-tab" class="tab-content hidden" role="tabpanel" aria-labelledby="gantt-tab-btn">
                    <div class="tab-header">
                        <h2 class="tab-title">Cronograma Geral</h2>
                    </div>
                    <div class="gantt-chart" id="ganttChartContainer">
                        <!-- O gr√°fico de Gantt ser√° renderizado aqui -->
                    </div>
                </div>
                <!-- Aba de Relat√≥rios -->
                <div id="reports-tab" class="tab-content hidden" role="tabpanel" aria-labelledby="reports-tab-btn">
                    <div class="tab-header">
                        <h2 class="tab-title">Relat√≥rios e M√©tricas</h2>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <h3 style="margin-bottom: 1rem;">Resumo do M√™s</h3>
                            <p style="color: #6b7280; margin-bottom: 0.5rem;">Projetos Iniciados: <strong>2</strong></p>
                            <p style="color: #6b7280; margin-bottom: 0.5rem;">Projetos Conclu√≠dos: <strong>3</strong></p>
                            <p style="color: #6b7280;">Tempo M√©dio: <strong>15 dias</strong></p>
                        </div>
                        <div class="stat-card">
                            <h3 style="margin-bottom: 1rem;">Performance da Equipe</h3>
                            <p style="color: #6b7280; margin-bottom: 0.5rem;">Tarefas Conclu√≠das: <strong>45</strong></p>
                            <p style="color: #6b7280; margin-bottom: 0.5rem;">Em Andamento: <strong>12</strong></p>
                            <p style="color: #6b7280;">Efici√™ncia: <strong>89%</strong></p>
                        </div>
                        <div class="stat-card">
                            <h3 style="margin-bottom: 1rem;">Satisfa√ß√£o do Cliente</h3>
                            <p style="color: #6b7280; margin-bottom: 0.5rem;">NPS Score: <strong>85</strong></p>
                            <p style="color: #6b7280; margin-bottom: 0.5rem;">Avalia√ß√µes Positivas: <strong>92%</strong></p>
                            <p style="color: #6b7280;">Reclama√ß√µes: <strong>2</strong></p>
                        </div>
                    </div>
                </div>
                <!-- Aba de Vis√£o do Cliente -->
                <div id="client-tab" class="tab-content hidden" role="tabpanel" aria-labelledby="client-tab-btn">
                    <div class="tab-header">
                        <h2 class="tab-title">Portal do Cliente</h2>
                    </div>
                    <div style="background: #f9fafb; padding: 1.5rem; border-radius: 0.5rem; margin-bottom: 1rem;">
                        <h3 style="margin-bottom: 1rem;">Bem-vindo ao Portal do Cliente</h3>
                        <p style="color: #6b7280;">Acompanhe o progresso da implanta√ß√£o do seu sistema em tempo real.</p>
                    </div>
                    <div id="clientProjectsList">
                        <!-- Projetos do cliente ser√£o mostrados aqui -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal de Projeto (Novo/Editar) -->
    <div id="projectModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="projectModalTitle">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="projectModalTitle">Novo Projeto</h2>
                <button class="modal-close" onclick="closeModal('projectModal')" aria-label="Fechar Modal">√ó</button>
            </div>
            <div class="modal-body">
                <!-- Se√ß√£o de Detalhes do Projeto -->
                <h3 class="section-header">Detalhes do Projeto</h3>
                <div class="form-group">
                    <label class="form-label">Nome do Projeto</label>
                    <input type="text" id="projectName" class="form-input" placeholder="Ex: Implanta√ß√£o ERP">
                </div>
                <!-- IN√çCIO: CAMPO DE CLIENTE COM AUTOCONCLUIR E BOT√ÉO DE ATUALIZAR -->
                <div class="form-group">
                    <label class="form-label">Cliente</label>
                    <div class="client-field-container" style="position: relative; display: flex; gap: 0.5rem;">
                        <input type="text" id="projectClient" class="form-input" placeholder="Selecione ou digite o nome do cliente">
                        <button type="button" id="refreshClientsBtn" class="btn btn-secondary" style="flex-shrink: 0;" aria-label="Atualizar Clientes">
                            üîÑ Atualizar
                        </button>
                        <div id="clientDropdown" class="client-dropdown hidden"></div>
                    </div>
                    <div id="clientLoadingStatus" style="font-size: 0.75rem; color: #6b7280; margin-top: 0.25rem;"></div>
                </div>
                <!-- FIM: CAMPO DE CLIENTE COM AUTOCONCLUIR E BOT√ÉO DE ATUALIZAR -->
                <div class="form-group full-width">
                    <label class="form-label">Descri√ß√£o</label>
                    <textarea id="projectDescription" class="form-textarea" placeholder="Descreva o projeto..."></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Data de In√≠cio</label>
                    <input type="date" id="projectStartDate" class="form-input">
                </div>
                <div class="form-group">
                    <label class="form-label">Data Prevista de T√©rmino</label>
                    <input type="date" id="projectEndDate" class="form-input">
                </div>
                <!-- Link do BI -->
                <div class="form-group full-width">
                    <label class="form-label">Link do BI (Opcional)</label>
                    <input type="url" id="projectBiLink" class="form-input" placeholder="Ex: https://app.powerbi.com/view/dashboard123">
                </div>
                <!-- Se√ß√£o da Equipe -->
                <h3 class="section-header">Equipe do Projeto</h3>
                <div class="form-group">
                    <label class="form-label">Gerente do Projeto</label>
                    <select id="projectLeadId" class="form-select">
                        <option value="">Selecione um Gerente</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Respons√°vel pela Equipe</label>
                    <select id="responsiblePersonId" class="form-select">
                        <option value="">Selecione um Respons√°vel</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Implantador Principal</label>
                    <select id="projectImplementerId" class="form-select">
                        <option value="">Selecione um Implantador</option>
                    </select>
                </div>
                <!-- Se√ß√£o de Fluxo -->
                <h3 class="section-header">Fluxo de Processos</h3>
                <div class="flow-selection-group">
                    <div class="form-group">
                        <label class="form-label">Fluxo do Projeto</label>
                        <select id="projectFlow" class="form-select" onchange="handleFlowSelectionChange()">
                            <option value="">Nenhum Fluxo</option>
                        </select>
                    </div>
                    <button type="button" class="btn btn-secondary" id="editProjectFlowBtn" onclick="openEditProjectFlowModal()" disabled aria-label="Editar Fluxo de Processos">
                        ‚úèÔ∏è Editar Fluxo de Processos
                    </button>
                </div>
                <!-- Se√ß√£o de Checklist Oficial -->
                <h3 class="section-header">Checklist de In√≠cio Oficial</h3>
                <div class="flow-selection-group"> <!-- Reutilizando flow-selection-group para layout similar -->
                    <div class="form-group">
                        <label class="form-label">Checklist de In√≠cio</label>
                        <select id="projectOfficialChecklist" class="form-select" onchange="handleOfficialChecklistSelectionChange()">
                            <option value="">Nenhum Checklist</option>
                        </select>
                    </div>
                    <button type="button" class="btn btn-secondary" id="editProjectOfficialChecklistBtn" onclick="openEditProjectOfficialChecklistModal()" disabled aria-label="Editar Checklist de In√≠cio Oficial">
                        ‚úèÔ∏è Editar Checklist
                    </button>
                </div>
                <!-- Se√ß√£o de Anexos -->
                <div class="attachments-section full-width">
                    <h3 style="margin-bottom: 1rem; font-size: 1rem;">Anexar Documentos</h3>
                    <div id="projectAttachmentsInputs">
                        <!-- Entradas de arquivo de anexo ser√£o preenchidas aqui -->
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('projectModal')">Cancelar</button>
                <button class="btn btn-primary" onclick="saveProject()">Salvar Projeto</button>
            </div>
        </div>
    </div>
    <!-- Modal de Visualiza√ß√£o de Projeto -->
    <div id="projectViewModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="projectViewTitle">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="projectViewTitle">Detalhes do Projeto</h2>
                <button class="modal-close" onclick="closeModal('projectViewModal')" aria-label="Fechar Modal">√ó</button>
            </div>
            <div class="modal-body">
                <div class="project-detail-grid">
                    <div class="project-detail-item">
                        <div class="project-detail-label">Nome do Projeto</div>
                        <div class="project-detail-value" id="viewProjectName"></div>
                    </div>
                    <div class="project-detail-item">
                        <div class="project-detail-label">Cliente</div>
                        <div class="project-detail-value" id="viewProjectClient"></div>
                    </div>
                    <div class="project-detail-item project-detail-full">
                        <div class="project-detail-label">Descri√ß√£o</div>
                        <div class="project-detail-value" id="viewProjectDescription"></div>
                    </div>
                    <div class="project-detail-item">
                        <div class="project-detail-label">Data de In√≠cio</div>
                        <div class="project-detail-value" id="viewProjectStartDate"></div>
                    </div>
                    <div class="project-detail-item">
                        <div class="project-detail-label">Data Prevista de T√©rmino</div>
                        <div class="project-detail-value" id="viewProjectEndDate"></div>
                    </div>
                    <div class="project-detail-item">
                        <div class="project-detail-label">Gerente do Projeto</div>
                        <div class="project-detail-value" id="viewProjectLead"></div>
                    </div>
                    <div class="project-detail-item">
                        <div class="project-detail-label">Respons√°vel pela Equipe</div>
                        <div class="project-detail-value" id="viewResponsiblePerson"></div>
                    </div>
                    <div class="project-detail-item">
                        <div class="project-detail-label">Implantador Principal</div>
                        <div class="project-detail-value" id="viewProjectImplementer"></div>
                    </div>
                    <div class="project-detail-item">
                        <div class="project-detail-label">Status Geral</div>
                        <div class="project-detail-value" id="viewProjectStatus"></div>
                    </div>
                    <div class="project-detail-item">
                        <div class="project-detail-label">Progresso Geral</div>
                        <div class="project-detail-value" id="viewProjectProgress"></div>
                    </div>
                    <!-- Exibi√ß√£o do Link do BI (apenas como texto, o bot√£o para abrir est√° na capa) -->
                    <div class="project-detail-item project-detail-full">
                        <div class="project-detail-label">Link do BI</div>
                        <div class="project-detail-value" id="viewProjectBiLinkText"></div>
                    </div>
                </div>
                <div class="project-detail-processes-list" id="viewProjectFlowProcessesContainer">
                    <div class="project-detail-label">Fluxo do Projeto: <strong id="viewProjectFlowName">Nenhum</strong></div>
                    <div id="viewProjectProcessesList">
                        <!-- Processos ser√£o carregados aqui -->
                    </div>
                </div>
                <div class="project-detail-processes-list"> <!-- Reutilizando classe para estilo consistente -->
                    <div class="project-detail-label">Checklist de In√≠cio Oficial: <strong id="viewProjectOfficialChecklistName">Nenhum</strong></div>
                    <ul id="viewProjectOfficialChecklistItems">
                        <!-- Itens do Checklist Oficial ser√£o carregados aqui -->
                    </ul>
                    <div class="checklist-progress-summary" id="viewProjectOfficialChecklistProgressSummary"></div>
                </div>
                <div class="project-detail-processes-list project-detail-attachments">
                    <div class="project-detail-label">Anexos:</div>
                    <ul id="viewProjectAttachmentsList">
                        <!-- Anexos ser√£o carregados aqui -->
                    </ul>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('projectViewModal')">Fechar</button>
            </div>
        </div>
    </div>
    <!-- Modal do Dashboard de BI (Novo Modal para Incorporar BI) -->
    <div id="biDashboardModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="biDashboardTitle">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="biDashboardTitle">Dashboard de BI</h2>
                <button class="modal-close" onclick="closeModal('biDashboardModal')" aria-label="Fechar Modal">√ó</button>
            </div>
            <div class="modal-body">
                <iframe id="biIframe" src="" frameborder="0" allowfullscreen></iframe>
            </div>
            <div class="modal-footer" style="justify-content: center;">
                <button class="btn btn-secondary" onclick="closeModal('biDashboardModal')">Fechar</button>
            </div>
        </div>
    </div>
    <!-- Modal de Gerenciamento de Fluxos -->
    <div id="flowManagerModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="flowManagerModalTitle">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="flowManagerModalTitle">Gerenciar Fluxos de Projeto</h2>
                <button class="modal-close" onclick="closeModal('flowManagerModal')" aria-label="Fechar Modal">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Nome do Novo Fluxo</label>
                    <input type="text" id="newFlowName" class="form-input" placeholder="Ex: Fluxo de Implanta√ß√£o Padr√£o">
                </div>
                <div class="form-group">
                    <label class="form-label">Adicionar Grupo de Processos</label>
                    <div class="process-input-group">
                        <input type="text" id="newFlowGroupName" class="form-input" placeholder="Nome do grupo (Ex: Faturamento)">
                        <button class="btn btn-primary" onclick="addGroupToCurrentFlow()">Adicionar Grupo</button>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Adicionar Processo ao Grupo</label>
                    <div class="process-input-group">
                        <select id="selectGroupForProcess" class="form-select" style="width: 150px; flex-shrink: 0;">
                            <option value="">Selecione um Grupo</option>
                            <!-- Grupos ser√£o preenchidos aqui -->
                        </select>
                        <input type="text" id="newProcessName" class="form-input" placeholder="Nome do processo (Ex: An√°lise de Requisitos)">
                        <button class="btn btn-primary" onclick="addProcessToCurrentFlow()">Adicionar Processo</button>
                    </div>
                    <div class="process-list-container">
                        <div id="currentFlowProcessesList">
                            <!-- Grupos e Processos para o novo/editado fluxo aparecer√£o aqui -->
                        </div>
                    </div>
                </div>
                <div class="modal-footer" style="padding: 0; border-top: none; background: none;">
                    <button class="btn btn-success" onclick="saveFlow()">Salvar Fluxo</button>
                </div>
                <hr style="margin: 2rem 0; border-color: #e5e7eb;">
                <h3>Importar Fluxo de Texto</h3>
                <div class="flow-importer">
                    <p style="margin-bottom: 0.5rem; color: #6b7280; font-size: 0.875rem;">
                        Cole o texto do fluxo no formato: <br>
                        `Nome do Grupo 1:<br>- Processo A<br>- Processo B<br>Nome do Grupo 2:<br>- Processo C`
                    </p>
                    <textarea id="flowImportTextarea" class="form-textarea" placeholder="Cole seu fluxo aqui..."></textarea>
                    <button class="btn btn-primary" style="margin-top: 0.75rem;" onclick="importFlowData()">Importar Fluxo</button>
                </div>
                <hr style="margin: 2rem 0; border-color: #e5e7eb;">
                <h3>Fluxos Existentes</h3>
                <div class="flow-list" id="existingFlowsList">
                    <!-- Fluxos existentes ser√£o listados aqui -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('flowManagerModal')">Fechar</button>
            </div>
        </div>
    </div>
    <!-- Modal de Gerenciamento de T√©cnicos -->
    <div id="technicianManagerModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="technicianManagerModalTitle">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="technicianManagerModalTitle">Cadastrar T√©cnicos</h2>
                <button class="modal-close" onclick="closeModal('technicianManagerModal')" aria-label="Fechar Modal">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Nome do T√©cnico</label>
                    <input type="text" id="technicianName" class="form-input" placeholder="Nome Completo">
                </div>
                <div class="form-group">
                    <label class="form-label">Hierarquia</label>
                    <select id="technicianRole" class="form-select">
                        <option value="">Selecione a Hierarquia</option>
                        <option value="Gerente do Projeto">Gerente do Projeto</option>
                        <option value="Respons√°vel pela Equipe">Respons√°vel pela Equipe</option>
                        <option value="Implantador">Implantador</option>
                    </select>
                </div>
                <div class="modal-footer" style="padding: 0; border-top: none; background: none;">
                    <button class="btn btn-success" onclick="saveTechnician()">Salvar T√©cnico</button>
                </div>
                <hr style="margin: 2rem 0; border-color: #e5e7eb;">
                <h3>T√©cnicos Cadastrados</h3>
                <div class="technician-list" id="existingTechniciansList">
                    <!-- T√©cnicos existentes ser√£o listados aqui -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('technicianManagerModal')">Fechar</button>
            </div>
        </div>
    </div>
    <!-- Modal de Gerenciamento de Usu√°rios -->
    <div id="userManagerModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="userManagerModalTitle">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="userManagerModalTitle">Gerenciar Usu√°rios</h2>
                <button class="modal-close" onclick="closeModal('userManagerModal')" aria-label="Fechar Modal">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Nome de Usu√°rio</label>
                    <input type="text" id="newUsername" class="form-input" placeholder="Nome de usu√°rio (login)">
                </div>
                <div class="form-group">
                    <label class="form-label">Senha</label>
                    <input type="password" id="newUserPassword" class="form-input" placeholder="Senha do usu√°rio">
                </div>
                <div class="form-group">
                    <label class="form-label">Nome Completo</label>
                    <input type="text" id="newUserNameFull" class="form-input" placeholder="Nome completo do usu√°rio">
                </div>
                <div class="form-group">
                    <label class="form-label">Hierarquia</label>
                    <select id="newUserRole" class="form-select">
                        <option value="">Selecione a Hierarquia</option>
                        <option value="admin">ADMIN</option>
                        <option value="implantador">Implantador</option>
                        <option value="cliente">Cliente</option>
                    </select>
                </div>
                <div class="modal-footer" style="padding: 0; border-top: none; background: none;">
                    <button class="btn btn-success" onclick="saveUser()">Salvar Usu√°rio</button>
                </div>
                <hr style="margin: 2rem 0; border-color: #e5e7eb;">
                <h3>Usu√°rios Cadastrados</h3>
                <div class="user-list" id="existingUsersList">
                    <!-- Usu√°rios existentes ser√£o listados aqui -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('userManagerModal')">Fechar</button>
            </div>
        </div>
    </div>
    <!-- Modal de Atualiza√ß√£o de Processos -->
    <div id="updateProcessModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="updateProcessModalTitle">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="updateProcessModalTitle">Atualizar Processos do Projeto</h2>
                <button class="modal-close" onclick="closeModal('updateProcessModal')" aria-label="Fechar Modal">√ó</button>
            </div>
            <div class="modal-body">
                <p style="margin-bottom: 1rem; color: #6b7280;">Projeto: <strong id="updateProcessProjectName"></strong></p>
                <div class="process-update-list" id="processUpdateList">
                    <!-- Processos a serem atualizados ser√£o listados aqui -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('updateProcessModal')">Cancelar</button>
                <button class="btn btn-primary" onclick="saveProcessUpdates()">Salvar Altera√ß√µes</button>
            </div>
        </div>
    </div>
    <!-- Modal para Pend√™ncias (Trello-style Board) -->
    <div id="todoModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="todoModalTitle">
        <div class="modal-content" style="max-width: 90vw; width: 90vw; height: 85vh; display: flex; flex-direction: column;">
            <div class="modal-header">
                <h2 class="modal-title" id="todoModalTitle">Pend√™ncias do Projeto</h2>
                <button class="modal-close" onclick="closeModal('todoModal')" aria-label="Fechar Modal">√ó</button>
            </div>
            <div class="modal-body" style="overflow: hidden; display: flex; flex-direction: column; flex-grow: 1;">
                <div class="board-container" id="todoBoard">
                    <!-- As listas de pend√™ncias ser√£o geradas aqui -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('todoModal')">Fechar</button>
                <button class="btn btn-primary" onclick="saveChanges('todo')">Salvar Altera√ß√µes</button>
            </div>
        </div>
    </div>
    <!-- Modal para Detalhes do Cart√£o de Pend√™ncia -->
    <div id="todoCardDetailModal" class="modal card-detail-modal" role="dialog" aria-modal="true" aria-labelledby="todoCardDetailTitle">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="todoCardDetailTitle">Detalhes da Pend√™ncia</h2>
                <button class="modal-close" onclick="closeModal('todoCardDetailModal')" aria-label="Fechar Modal">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">T√≠tulo</label>
                    <input type="text" id="todoCardDetailName" class="form-input">
                </div>
                <div class="form-group">
                    <label class="form-label">Descri√ß√£o</label>
                    <textarea id="todoCardDetailDescription" class="form-textarea"></textarea>
                </div>
                <div class="card-detail-checklist">
                    <div class="card-detail-checklist-header">
                        <span class="card-detail-checklist-title">Check-list</span>
                        <span class="card-detail-checklist-progress" id="todoCardDetailProgress">0/0</span>
                    </div>
                    <div class="card-detail-checklist-items" id="todoCardDetailChecklistItems">
                        <!-- Itens do check-list ser√£o gerados aqui -->
                    </div>
                    <div class="card-detail-add-item">
                        <input type="text" id="todoCardDetailNewItem" class="card-detail-add-item-input" placeholder="Adicionar novo item...">
                        <button class="btn btn-primary" onclick="addChecklistItem('todo')">Adicionar</button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-danger" onclick="deleteCard('todo')">Excluir</button>
                <button class="btn btn-secondary" onclick="closeModal('todoCardDetailModal')">Cancelar</button>
                <button class="btn btn-primary" onclick="saveCardDetail('todo')">Salvar</button>
            </div>
        </div>
    </div>
    <!-- NOVO MODAL PARA ANOTA√á√ïES (Trello-style Board) -->
    <div id="notesModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="notesModalTitle">
        <div class="modal-content" style="max-width: 90vw; width: 90vw; height: 85vh; display: flex; flex-direction: column;">
            <div class="modal-header">
                <h2 class="modal-title" id="notesModalTitle">Minhas Anota√ß√µes</h2>
                <button class="modal-close" onclick="closeModal('notesModal')" aria-label="Fechar Modal">√ó</button>
            </div>
            <div class="modal-body" style="overflow: hidden; display: flex; flex-direction: column; flex-grow: 1;">
                <div class="board-container" id="notesBoard">
                    <!-- As listas de anota√ß√µes ser√£o geradas aqui -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('notesModal')">Fechar</button>
                <button class="btn btn-primary" onclick="saveChanges('notes')">Salvar Altera√ß√µes</button>
            </div>
        </div>
    </div>
    <!-- NOVO MODAL PARA DETALHES DO CART√ÉO DE ANOTA√á√ÉO -->
    <div id="notesCardDetailModal" class="modal card-detail-modal" role="dialog" aria-modal="true" aria-labelledby="notesCardDetailTitle">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="notesCardDetailTitle">Detalhes da Anota√ß√£o</h2>
                <button class="modal-close" onclick="closeModal('notesCardDetailModal')" aria-label="Fechar Modal">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">T√≠tulo</label>
                    <input type="text" id="notesCardDetailName" class="form-input">
                </div>
                <div class="form-group">
                    <label class="form-label">Descri√ß√£o</label>
                    <textarea id="notesCardDetailDescription" class="form-textarea"></textarea>
                </div>
                <div class="card-detail-checklist">
                    <div class="card-detail-checklist-header">
                        <span class="card-detail-checklist-title">Check-list</span>
                        <span class="card-detail-checklist-progress" id="notesCardDetailProgress">0/0</span>
                    </div>
                    <div class="card-detail-checklist-items" id="notesCardDetailChecklistItems">
                        <!-- Itens do check-list ser√£o gerados aqui -->
                    </div>
                    <div class="card-detail-add-item">
                        <input type="text" id="notesCardDetailNewItem" class="card-detail-add-item-input" placeholder="Adicionar novo item...">
                        <button class="btn btn-primary" onclick="addChecklistItem('notes')">Adicionar</button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-danger" onclick="deleteCard('notes')">Excluir</button>
                <button class="btn btn-secondary" onclick="closeModal('notesCardDetailModal')">Cancelar</button>
                <button class="btn btn-primary" onclick="saveCardDetail('notes')">Salvar</button>
            </div>
        </div>
    </div>
    <!-- NOVO MODAL PARA BUSCA GERAL -->
    <div id="generalSearchModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="generalSearchModalTitle">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="generalSearchModalTitle">Buscar Geral</h2>
                <button class="modal-close" onclick="closeModal('generalSearchModal')" aria-label="Fechar Modal">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-group" style="display: flex; gap: 0.5rem;">
                    <input type="text" id="generalSearchInput" class="form-input" placeholder="Digite a palavra para pesquisar..." onkeyup="if(event.key === 'Enter') performGeneralSearch()">
                    <button class="btn btn-primary" onclick="performGeneralSearch()">Pesquisar</button>
                </div>
                <div id="searchResultsList">
                    <p style="text-align: center; color: #6b7280;">Digite sua busca e pressione "Pesquisar".</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('generalSearchModal')">Fechar</button>
            </div>
        </div>
    </div>
    <!-- NOVO MODAL PARA SELE√á√ÉO DE FLUXO DO PROJETO -->
    <div id="editProjectFlowModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="editProjectFlowModalTitle">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="editProjectFlowModalTitle">Editar Fluxo de Processos do Projeto</h2>
                <button class="modal-close" onclick="closeModal('editProjectFlowModal')" aria-label="Fechar Modal">√ó</button>
            </div>
            <div class="modal-body">
                <p style="margin-bottom: 1rem; color: #6b7280;">Fluxo selecionado: <strong id="selectedFlowNameForEdit">Nenhum</strong></p>
                <div class="flow-process-controls">
                    <button class="btn btn-secondary btn-sm" onclick="toggleAllProcesses(true)">Selecionar Todos</button>
                    <button class="btn btn-secondary btn-sm" onclick="toggleAllProcesses(false)">Desmarcar Todos</button>
                </div>
                <div class="flow-process-list" id="projectFlowProcessSelectionList">
                    <!-- Grupos e processos com checkboxes ser√£o carregados aqui -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('editProjectFlowModal')">Cancelar</button>
                <button class="btn btn-primary" onclick="saveProjectFlowSelection()">Salvar Sele√ß√£o</button>
            </div>
        </div>
    </div>
    <!-- Modal de Gerenciamento de Checklist Oficial -->
    <div id="officialChecklistManagerModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="officialChecklistManagerModalTitle">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="officialChecklistManagerModalTitle">Gerenciar Checklists de In√≠cio Oficial</h2>
                <button class="modal-close" onclick="closeModal('officialChecklistManagerModal')" aria-label="Fechar Modal">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Nome do Novo Checklist</label>
                    <input type="text" id="newOfficialChecklistName" class="form-input" placeholder="Ex: Checklist de Implanta√ß√£o Padr√£o">
                </div>
                <div class="form-group">
                    <label class="form-label">Adicionar Item ao Checklist</label>
                    <div class="official-checklist-input-group">
                        <input type="text" id="newChecklistItemText" class="form-input" placeholder="Descri√ß√£o do item (Ex: Reuni√£o de Kick-off)">
                        <button class="btn btn-primary" onclick="addChecklistItemToCurrentOfficialChecklist()">Adicionar Item</button>
                    </div>
                    <div class="official-checklist-items-list">
                        <ul id="currentOfficialChecklistItemsList">
                            <!-- Itens para o novo/editado checklist aparecer√£o aqui -->
                        </ul>
                    </div>
                </div>
                <div class="modal-footer" style="padding: 0; border-top: none; background: none;">
                    <button class="btn btn-success" onclick="saveOfficialChecklist()">Salvar Checklist</button>
                </div>
                <hr style="margin: 2rem 0; border-color: #e5e7eb;">
                <h3>Checklists Existentes</h3>
                <div class="official-checklist-list" id="existingOfficialChecklistsList">
                    <!-- Checklists oficiais existentes ser√£o listados aqui -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('officialChecklistManagerModal')">Fechar</button>
            </div>
        </div>
    </div>
    <!-- Modal de Edi√ß√£o de Checklist Oficial do Projeto (para selecionar/desselecionar itens do template) -->
    <div id="editProjectOfficialChecklistModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="editProjectOfficialChecklistModalTitle">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="editProjectOfficialChecklistModalTitle">Editar Checklist de In√≠cio Oficial do Projeto</h2>
                <button class="modal-close" onclick="closeModal('editProjectOfficialChecklistModal')" aria-label="Fechar Modal">√ó</button>
            </div>
            <div class="modal-body">
                <p style="margin-bottom: 1rem; color: #6b7280;">Checklist selecionado: <strong id="selectedOfficialChecklistNameForEdit">Nenhum</strong></p>
                <div class="flow-process-controls">
                    <button class="btn btn-secondary btn-sm" onclick="toggleAllProjectChecklistItems(true)">Selecionar Todos</button>
                    <button class="btn btn-secondary btn-sm" onclick="toggleAllProjectChecklistItems(false)">Desmarcar Todos</button>
                </div>
                <div class="official-checklist-items-list" id="projectOfficialChecklistSelectionList">
                    <!-- Itens do checklist com checkboxes ser√£o carregados aqui -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('editProjectOfficialChecklistModal')">Cancelar</button>
                <button class="btn btn-primary" onclick="saveProjectOfficialChecklistSelection()">Salvar Sele√ß√£o</button>
            </div>
        </div>
    </div>
    <!-- Modal de Atualiza√ß√£o de Checklist Oficial (para marcar itens como revisados) -->
    <div id="updateOfficialChecklistModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="updateOfficialChecklistModalTitle">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="updateOfficialChecklistModalTitle">Atualizar Checklist de In√≠cio Oficial</h2>
                <button class="modal-close" onclick="closeModal('updateOfficialChecklistModal')" aria-label="Fechar Modal">√ó</button>
            </div>
            <div class="modal-body">
                <p style="margin-bottom: 1rem; color: #6b7280;">Projeto: <strong id="updateOfficialChecklistProjectName"></strong></p>
                <div class="official-checklist-items-list" id="officialChecklistUpdateList">
                    <!-- Itens do checklist a serem atualizados ser√£o listados aqui -->
                </div>
                <div class="checklist-progress-summary" id="updateOfficialChecklistProgressSummary"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('updateOfficialChecklistModal')">Fechar</button>
                <button class="btn btn-primary" onclick="saveOfficialChecklistUpdates()">Salvar Altera√ß√µes</button>
            </div>
        </div>
    </div>
    <!-- Link para o arquivo JavaScript externo -->
    <script src="script.js"></script>
</body>
</html>
